{% extends 'flatpages/default.html' %}

{% load custom_filters %}

{% block title %}
News
{% endblock title %}

{% block content %}
<hr>
<form action="" method="get">
    {{ filterset.form.as_p }}
    <input type="submit" value="Найти" />
</form>
<hr>
{% if news %}
<table>
    <tr>
        <td>Заголовок</td>
        <td>Дата публикации</td>
        <td>Превью</td>
    </tr>
    {% for new in news %}
    <tr>
        <td>{{ new.header }}</td>
        <td>{{ new.post_datetime|date:'D M Y' }}</td>
        <td>{{ new.text|truncatewords:20 }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<h2>Новостей нет!</h2>
{% endif %}
{% endblock content %}